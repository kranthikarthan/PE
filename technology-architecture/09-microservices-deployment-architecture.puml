@startuml MICROSERVICES_DEPLOYMENT_ARCHITECTURE
!theme plain
title Microservices Deployment Architecture

package "Development Environment" {
    [Developer Machine] as DM
    [Local Kubernetes] as LK
    [Docker Compose] as DC
    [Local Services] as LS
}

package "CI/CD Pipeline" {
    [GitHub Repository] as GR
    [GitHub Actions] as GA
    [Maven Build] as MB
    [Docker Build] as DB
    [Docker Registry] as DR
    [ArgoCD] as ARGO
    [SonarQube] as SQ
    [Trivy Security Scan] as TSS
}

package "Testing Environment" {
    [Test Kubernetes Cluster] as TKC
    [Test Services] as TS
    [Test Database] as TDB
    [Test Message Queue] as TMQ
    [Test Monitoring] as TM
}

package "Staging Environment" {
    [Staging Kubernetes Cluster] as SKC
    [Staging Services] as SS
    [Staging Database] as SDB
    [Staging Message Queue] as SMQ
    [Staging Monitoring] as SM
}

package "Production Environment" {
    [Production Kubernetes Cluster] as PKC
    [Production Services] as PS
    [Production Database] as PDB
    [Production Message Queue] as PMQ
    [Production Monitoring] as PM
}

package "Disaster Recovery" {
    [DR Kubernetes Cluster] as DRKC
    [DR Services] as DRS
    [DR Database] as DRDB
    [DR Message Queue] as DRMQ
    [DR Monitoring] as DRM
}

package "External Systems" {
    [Clearing Systems] as CS
    [Payment Schemes] as PS2
    [Regulatory Systems] as RS
    [Third-party APIs] as TPA
}

' Development flow
DM --> GR
GR --> GA
GA --> MB
MB --> DB
DB --> DR

' CI/CD flow
GA --> SQ
GA --> TSS
GA --> ARGO
ARGO --> TKC
ARGO --> SKC
ARGO --> PKC

' Testing flow
TKC --> TS
TS --> TDB
TS --> TMQ
TS --> TM

' Staging flow
SKC --> SS
SS --> SDB
SS --> SMQ
SS --> SM

' Production flow
PKC --> PS
PS --> PDB
PS --> PMQ
PS --> PM

' Disaster recovery flow
DRKC --> DRS
DRS --> DRDB
DRS --> DRMQ
DRM --> DRM

' External connections
PS --> CS
PS --> PS2
PS --> RS
PS --> TPA

' Deployment strategies
note right of ARGO
Deployment Strategies:
- Blue-Green deployment
- Canary deployment
- Rolling updates
- A/B testing
- Feature flags
- Circuit breaker
- Health checks
- Auto-scaling
end note

' Environment isolation
note right of TKC
Environment Isolation:
- Network policies
- Resource quotas
- Namespace isolation
- Service mesh policies
- Security policies
- Access control
- Monitoring isolation
- Data isolation
end note

' Monitoring and observability
note right of PM
Production Monitoring:
- Application metrics
- Infrastructure metrics
- Business metrics
- Error tracking
- Performance monitoring
- SLA monitoring
- Alerting
- Dashboards
end note

' Security measures
note right of TSS
Security Measures:
- Container scanning
- Vulnerability assessment
- Secret management
- Certificate management
- Network security
- Access control
- Audit logging
- Compliance monitoring
end note

' Disaster recovery
note right of DRKC
Disaster Recovery:
- Backup and restore
- Data replication
- Service replication
- Monitoring replication
- Failover procedures
- Recovery testing
- RTO/RPO targets
- Business continuity
end note

@enduml